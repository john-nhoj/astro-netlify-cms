# Astro Example: Blog with Netlify CMS + Netlify Identity

```
npm init astro -- --template john-nhoj/astro-netlify-cms
```

This example showcase Astro's starter kit for blogs enhanced with Netlify CMS to edit blog posts.

Added Features:

- âœ… Netlify CMS for content
- âœ… Netlify Identity for authentication
- âœ… Role-based access to Netlify CMS

## ðŸš€ Project Structure

Inside of your Astro project, you'll see the following folders and files in addition to those generated by Astro Blog Starter Kit:

```
/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ admin
â”‚   	|â”€â”€ config.yml
â”‚   	â””â”€â”€ index.html
â”œâ”€â”€ src/
â”‚   â””â”€â”€ pages/
â”‚       â””â”€â”€ login.astro
â””â”€â”€ netlify.toml
```

The `admin` folder contains the needed files for Netlify CMS and the `login.astro` page is a simple page to authenticate with Netlify Identity widget.

The `netlify.toml` configuration file takes care of the role-based access to the admin console of Netlify CMS. In this case, the user needs to have a role of `admin` to access, otherwise, they are redirected to the login page.

## ðŸ§ž Commands

All commands are run from the root of the project, from a terminal:

| Command         | Action                                      |
| :-------------- | :------------------------------------------ |
| `npm install`   | Installs dependencies                       |
| `npm start`     | Starts local dev server at `localhost:3000` |
| `npm run build` | Build your production site to `./dist/`     |

## ðŸ‘€ Want to learn more?

- [Astro documentation](https://github.com/snowpackjs/astro)
- [Netlify CMS documentation](https://www.netlifycms.org/)
- [Netlify Identity documentation](https://docs.netlify.com/visitor-access/identity/)
- [Netlify Identity widget](https://github.com/netlify/netlify-identity-widget)
- [Redirects & Role-based access documentation](https://docs.netlify.com/visitor-access/role-based-access-control/)
